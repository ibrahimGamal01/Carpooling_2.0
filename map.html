<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Carpooling UNFCCC</title>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="./style.css">

    <link rel="icon" type="image/png" href="src/favicon/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="src/favicon/android-chrome-512x512.png" sizes="512x512">
    <link rel="apple-touch-icon" href="src/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/x-icon" href="src/favicon/favicon.ico">
    <link rel="icon" type="image/png" href="src/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="src/favicon/favicon-32x32.png" sizes="32x32">

    <!-- Load Leaflet from CDN -->
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

    <!-- original CSS of the routing-machine -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
        integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
        crossorigin=""></script>

</head>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        color: black;
    }

    #menu-icon {
        color: black;
        /* position: absolute;
        bottom: 0;
        right: 0; */
        margin-bottom: 10px;
    }


    .map-container {
        height: 100vh;
    }

    .nav-list li a {
        color: rgb(0, 0, 0);
    }

    .logo {
        display: block;
        margin: 10px;
        margin-top: 5px;
        margin-left: 40px;
    }
</style>

<body>

    <body>
        <nav class="navv">
            <a href="#" class="logo"><img src="src/unfccc_logo.png" alt="Logo" class="logo-image"></a>
            <div class="bx bx-menu" id="menu-icon"></div>

            <ul class="nav-list">
                <li><a href="Home.html">Home</a></li>
                <li><a href="passenger.html">Passenger</a></li>
                <li><a href="driver.html">Driver</a></li>
                <li><a href="map.html">Map</a></li>
            </ul>
        </nav>
        <div class="main-content">
            <div id="map" class="map-container"></div>
        </div>
    </body>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-routing-machine/3.2.12/leaflet-routing-machine.min.js"></script>
    <script>
        let menu = document.querySelector('#menu-icon');
        let navList = document.querySelector('.nav-list');

        menu.onclick = () => {
            menu.classList.toggle('bx-x');
            navList.classList.toggle('open');
        }



        //This is the center of the map
        const cntr_loc = L.latLng(50.704129514100735, 7.16153100070237);

        //This is the location of the marker
        // const orig_loc = L.latLng(50.704129514100735, 7.16153100070237);
        // const dest_loc = L.latLng(50.712129514100735, 7.17153100070237);
        
        const orig_loc = L.latLng(50.707129514100735, 7.15953100070237);
        const dest_loc = L.latLng(50.716129514100735, 7.16953100070237);

        var zoom = 16;

        //This is the map
        var map = L.map("map", {
            preferCanvas: false,
        }).setView(cntr_loc, zoom);

        //This map tiles is simple and no hassles.
        L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            attribution: "Map data &copy; OpenStreetMap contributors",
        }).addTo(map);

        //This is the marker
        const checkmk = `<svg width="24" height="24" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"><path stroke="black" stroke-width="1.5%" opacity="0.8" fill="brown" d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"></path></svg>`;

        function checkmk_mk(color) {
            // assume checkmk has `brown` only 1 place
            return checkmk.replace(/brown/g, color);
        }

        const svgpin_Url = encodeURI("data:image/svg+xml;utf-8," + checkmk_mk("red"));
        const svgpin_Url2 = encodeURI(
            "data:image/svg+xml;utf-8," + checkmk_mk("green")
        );
        const svgpin_Url3 = encodeURI(
            "data:image/svg+xml;utf-8," + checkmk_mk("black")
        );

        const svgpin_Icon = L.icon({
            iconUrl: svgpin_Url,
            iconSize: [24, 24],
            iconAnchor: [12, 24],
            popupAnchor: [0, -22],
        });
        const svgpin_Icon2 = L.icon({
            iconUrl: svgpin_Url2,
            iconSize: [24, 24],
            iconAnchor: [12, 24],
            popupAnchor: [0, -22],
        });
        const svgpin_Icon3 = L.icon({
            iconUrl: svgpin_Url3,
            iconSize: [24, 24],
            iconAnchor: [12, 24],
            popupAnchor: [0, -22],
        });

        /* Start routing control  */
        function begin_routing() {
            L.Routing.control({
                waypoints: [
                    orig_loc,
                    dest_loc,
                    //L.latLng(14.1688, 100.2918),
                    //L.latLng(13.7042, 100.6032)
                ],
                routeWhileDragging: true,
                routeDragInterval: 500,
                collapsible: true, // hide/show panel routing
                reverseWaypoints: false,
                showAlternatives: false,
                createMarker: function (i, wp, nWps) {
                    switch (i) {
                        case 0:
                            return L.marker(wp.latLng, {
                                icon: svgpin_Icon2,
                                draggable: true,
                            }).bindPopup("<b>" + "Origin" + "</b>");
                        case nWps - 1:
                            return L.marker(wp.latLng, {
                                icon: svgpin_Icon,
                                draggable: true,
                            }).bindPopup("<b>" + "Destination" + "</b>");
                        default:
                            return L.marker(wp.latLng, {
                                icon: svgpin_Icon3,
                                draggable: true,
                            }).bindPopup("<b>" + "Waypoint" + "</b>");
                    }
                },
            }).addTo(map);
        }

        begin_routing();
    </script>

</body>

</html>